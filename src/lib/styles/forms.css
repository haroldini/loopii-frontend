/* styles/forms.css */

input,
textarea,
select {
    width: 100%;
    padding: var(--space-2-5) var(--space-3);
    border: var(--border-width) solid var(--border-color);
    border-radius: var(--radius-md);
    background: var(--bg-surface-alt);
    color: var(--text-secondary);
    font: inherit;
    line-height: var(--line-height);
    transition: border-color 0.15s ease background 0.15s ease, color 0.15s ease;
}

input:disabled,
textarea:disabled,
select:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    color: var(--text-muted);
    background: color-mix(in oklab, var(--bg-surface-alt) 90%, var(--bg-app));
}

textarea {
    resize: vertical;
    min-height: 4rem;
    border-bottom-right-radius: 0;
}

/* Remove number input spinners */
input[type="number"] {
    appearance: textfield;
}

input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
    appearance: none;
    margin: 0;
}

/* Single-select: custom arrow */
select:not([multiple]) {
    appearance: none;
    padding-right: calc(var(--space-3) * 2.5);

    background-image:
        linear-gradient(45deg, transparent 50%, var(--text-muted) 50%),
        linear-gradient(135deg, var(--text-muted) 50%, transparent 50%);
    background-position:
        calc(100% - 1.15rem) 50%,
        calc(100% - 0.85rem) 50%;
    background-size: 0.375rem 0.375rem, 0.375rem 0.375rem;
    background-repeat: no-repeat;
    cursor: pointer;
}

select:disabled,
select[disabled] {
    cursor: not-allowed;
}

/* Date inputs */

input[type="date"],
input[type="datetime-local"],
input[type="month"],
input[type="week"],
input[type="time"] {
    cursor: pointer;
}

input[type="date"]:disabled,
input[type="datetime-local"]:disabled,
input[type="month"]:disabled,
input[type="week"]:disabled,
input[type="time"]:disabled {
    cursor: not-allowed;
}

/* Checkboxes */

input[type="checkbox"] {
    -webkit-appearance: none;
    appearance: none;

    width: 1.5rem !important;
    height: 1.5rem !important;
    min-width: 1.5rem !important;
    min-height: 1.5rem !important;
    aspect-ratio: 1 / 1;

    padding: 0 !important;
    margin: 0;

    display: inline-grid;
    place-content: center;

    background: var(--bg-surface-alt);
    border: var(--border-width) solid var(--border-color);
    border-radius: var(--radius-sm);

    cursor: pointer;
    flex: 0 0 auto;
}

/* Checked state */
input[type="checkbox"]:checked {
    background: var(--accent);
    border-color: var(--accent);
}

/* Check mark */
input[type="checkbox"]::after {
    content: "";
    width: 0.55rem;
    height: 0.3rem;
    border-left: 2px solid var(--text-primary);
    border-bottom: 2px solid var(--text-primary);
    transform: rotate(-45deg);
    opacity: 0;
}

/* Show check when checked */
input[type="checkbox"]:checked::after {
    opacity: 1;
}

/* Focus */
input[type="checkbox"]:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/* Disabled */
input[type="checkbox"]:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.form__legal {
    width: 100%;
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.form__legal input[type="checkbox"] {
    margin-left: auto;
    margin-right: var(--space-2);
    flex: 0 0 auto;
}


/* NON-TOUCH DEVICES: HOVER */
@media (hover: hover) and (pointer: fine) {
    select:not([multiple]):hover:not(:focus):not(:active) {
        background-color: var(--bg-hover);
    }
}

/* TOUCH / STYLUS DEVICES: ACTIVE */
@media (hover: none) and (pointer: coarse), (hover: none) and (pointer: fine) {
    select:not([multiple]):active:not(:focus) {
        background-color: var(--bg-hover);
    }
}
